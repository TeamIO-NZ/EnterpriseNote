{"version":3,"sources":["models/User.ts","services/Context.tsx","elements/MenuAppBar.tsx","services/HttpCommon.tsx","services/UserServices.tsx","elements/Copyright.tsx","pages/Login.tsx","models/Note.ts","services/NoteServices.tsx","elements/EditDialog.tsx","elements/NoteShareGroup.tsx","elements/ShareDialog.tsx","services/UserSettingService.tsx","elements/NotesList.tsx","elements/SearchBar.tsx","pages/Home.tsx","pages/Register.tsx","pages/UserList.tsx","services/ConnectionService.tsx","elements/ConnectionWarning.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["User","name","password","loggedIn","token","email","gender","id","userSettings","this","UserContext","createContext","user","setUser","console","warn","useUser","useContext","useStyles","makeStyles","theme","createStyles","root","flexGrow","menuButton","marginRight","spacing","title","avatar","backgroundColor","blue","color","MenuAppBar","history","useHistory","classes","React","useState","anchorEl","setAnchorEl","open","Boolean","loc","useLocation","hideLogin","pathname","handleClose","className","AppBar","position","Toolbar","IconButton","edge","aria-label","Typography","variant","Avatar","aria-controls","onClick","event","currentTarget","charAt","toUpperCase","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","push","Button","axios","create","baseURL","headers","http","get","data","log","post","put","delete","username","getAll","then","response","Copyright","align","to","Date","getFullYear","paper","marginTop","display","flexDirection","alignItems","margin","palette","secondary","main","form","width","submit","Login","usernameInvalid","setUsernameInvalid","passwordInvalid","setPasswordInvalid","waiting","setWaiting","isMounted","useIsMounted","processJsonResponse","UserService","login","userInfo","atob","userId","usersettings","Container","component","maxWidth","CssBaseline","noValidate","TextField","required","fullWidth","label","autoComplete","error","onChange","e","test","target","value","toLowerCase","handleUsername","disabled","autoFocus","type","handlePassword","preventDefault","handleSubmit","CircularProgress","size","Grid","container","item","xs","Box","mt","Note","desc","content","owner","viewers","editors","uId","getAllUserHasAccessTo","appBar","marginLeft","flex","editor","search","borderRadius","shape","fade","common","white","breakpoints","up","searchIcon","padding","height","pointerEvents","justifyContent","inputRoot","inputInput","paddingLeft","transition","transitions","Transition","forwardRef","props","ref","Slide","direction","EditDialog","setOpen","note","setShouldRefresh","setContent","setTitle","setDesc","JSON","stringify","convertToRaw","EditorState","createEmpty","getCurrentContent","setData","String","now","useEffect","btoa","handleSave","NoteDataService","update","res","Dialog","fullScreen","TransitionComponent","Title","InputBase","placeholder","input","inputProps","defaultValue","Description","inlineToolbar","onSave","NoteShareGroup","setOwner","setEditors","setViewers","genGroup","users","length","AvatarGroup","max","map","u","cloneElement","Tooltip","alt","toString","key","UserServices","n","undefined","Object","assign","forEach","v","justify","sm","Role","actions","listText","formControl","minWidth","ShareDialog","setNote","requestRefresh","setUsers","refreshCauseImLazy","setRefreshCauseImLazy","ul","role","getRole","Owner","includes","Editor","Viewer","None","handleRadioChange","clearUserRoles","indexOf","filter","NoteServices","aria-labelledby","DialogTitle","UserSettingService","code","shouldCreate","List","ListItem","ListItemAvatar","People","ListItemText","ListItemSecondaryAction","primary","Radio","checked","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","text","generate","element","notes","expanded","handleExpand","handleOpenEditor","deleteNote","handleShare","index","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionActions","Delete","Edit","Divider","AccordionDetails","plugins","gfm","children","draftToMarkdown","parse","NotesList","shouldRefresh","setNotes","setActiveNote","setEditorOpen","dense","setExpanded","isLoaded","setIsLoaded","openShare","setOpenShare","getData","panel","isExpanded","noteId","style","iconButton","divider","hint","searchTypes","tooltip","SearchBar","setDisplayNotes","searchType","setSearchType","searchLock","setSearchLock","searchCount","setSearchCount","hasSearched","setHasSearched","searchText","setSearchText","rThreeLetter","rThreeWorlds","rEmail","rAreaCode","rNumber","searchByType","output","split","s","startsWith","endsWith","matchedArea","countMatches","str","re","match","showResults","noteList","note2","stripStyling","state","createWithContent","convertFromRaw","getPlainText","Paper","handleReset","results","handleSearch","Search","orientation","FormControl","Select","option","FormHelperText","Home","displayed","setDisplayed","editorOpen","activeNote","md","Add","Register","setUsername","setPassword","setEmail","emailInvalid","setEmailInvalid","passwordRepeatInvalid","setPasswordRepeatInvalid","getByName","getByEmail","deleteUser","ConnectionWarning","show","setShow","setInterval","ConnectionService","catch","Collapse","in","Alert","severity","App","Provider","Fragment","exact","path","UserList","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.ee61e389.chunk.js","sourcesContent":["export default class User {\r\n  constructor(name: string, password: string, loggedIn: boolean, token: string, email: string, gender: string, id: number, userSettings: number) {\r\n    this.name = name;\r\n    this.password = password;\r\n    this.loggedIn = loggedIn;\r\n    this.token = token;\r\n    this.email = email;\r\n    this.gender = gender;\r\n    this.id = id;\r\n    this.userSettings = userSettings\r\n  }\r\n  name: string;\r\n  password: string;\r\n  loggedIn: boolean;\r\n  token: string;\r\n  email: string;\r\n  gender: string;\r\n  id: number\r\n  userSettings: number\r\n}\r\n","import { createContext, useContext } from \"react\";\r\n\r\nimport User from \"../models/User\";\r\n\r\nexport type UserContextType = {\r\n  user: User,\r\n  setUser: (User: User) => void;\r\n}\r\nexport const UserContext = createContext<UserContextType>({\r\n  user: new User(\"\", \"\", false, \"\", \"\", \"\", 0, -1),\r\n  setUser: (User: User) => console.warn('No User Provider')\r\n});\r\n\r\nexport const useUser = () => useContext(UserContext);\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { Avatar } from '@material-ui/core';\r\nimport { useUser } from '../services/Context';\r\nimport User from '../models/User';\r\nimport { blue } from '@material-ui/core/colors';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n    avatar: {\r\n      backgroundColor: blue[100],\r\n      color: blue[600],\r\n    },\r\n  }),\r\n);\r\n\r\nexport default function MenuAppBar() {\r\n  const { user, setUser } = useUser();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  let loc = useLocation();\r\n  let hideLogin: boolean = (loc.pathname === \"/login\" || loc.pathname === \"/register\");\r\n\r\n  const handleLogin = () => {\r\n    history.push(\"/login\");\r\n  }\r\n  const handleUserListPush = () => {\r\n    history.push(\"/users\");\r\n  }\r\n  const handleMyNotesPush = () => {\r\n    history.push(\"/\");\r\n  }\r\n  const handleLogout = () => {\r\n    setUser(new User(\"\", \"\", false, \"\", \"\", \"\", -1, -1));\r\n    history.push(\"/login\");\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Enterprise Note\r\n          </Typography>\r\n          {user.token !== \"\" && (\r\n            <div>\r\n              <Avatar\r\n                aria-label={`account of ${user.name}`}\r\n                aria-controls=\"menu-appbar\"\r\n                onClick={handleMenu}\r\n                className={classes.avatar}\r\n              >\r\n                {user.name.charAt(0).toUpperCase()}\r\n              </Avatar>\r\n              <Menu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                keepMounted\r\n                transformOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                open={open}\r\n                onClose={handleClose}\r\n              >\r\n                <MenuItem onClick={() => { handleMyNotesPush(); handleClose() }}>My Notes</MenuItem>\r\n                <MenuItem onClick={() => { handleUserListPush(); handleClose() }}>UserList</MenuItem>\r\n                <MenuItem onClick={() => { handleLogout(); handleClose(); }}>Logout</MenuItem>\r\n              </Menu>\r\n            </div>\r\n          )}\r\n          {\r\n            !hideLogin && user.token === \"\" && (\r\n              <Button color=\"inherit\" onClick={handleLogin && handleClose}>Login</Button>\r\n            )\r\n          }\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n};","import axios from \"axios\";\r\n\r\nexport default axios.create({\r\n  baseURL: \"http://192.168.0.64:8082/api/v1/\",\r\n  headers: {\r\n    \"Content-type\": \"application/json\"\r\n  }\r\n});","import http from \"./HttpCommon\";\r\n\r\nclass UserDataService {\r\n  getAll() {\r\n    return http.get(\"/users\");\r\n  }\r\n  get(id: number) {\r\n    return http.get(`/user/${id}`);\r\n  }\r\n  getByName(name: string) {\r\n    return http.get(`/user/name/${name}`);\r\n  }\r\n  getByEmail(email: string) {\r\n    return http.get(`/user/email/${email}`);\r\n  }\r\n  create(data: any) {\r\n    console.log(\"Create me:\")\r\n    console.log(data);\r\n    return http.post(\"/user\", data);\r\n  }\r\n\r\n  update(id: number, data: any) {\r\n    return http.put(`/user/${id}`, data);\r\n  }\r\n\r\n  delete(id: number) {\r\n    return http.delete(`/user/${id}`);\r\n  }\r\n\r\n  //   deleteAll() {\r\n  //     return http.delete(`/tutorials`);\r\n  //   }\r\n\r\n  login(username: string, password: string) {\r\n    return http.get(`/login/${username}/${password}`);\r\n  }\r\n  async getData() {\r\n    console.log(\"Getting Data\");\r\n    return await this.getAll().then(response => {\r\n      console.log(response);\r\n      return response.data;\r\n    });\r\n  };\r\n}\r\nexport default new UserDataService();","import { Typography } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright Â© '}\r\n      <Link color=\"inherit\" to=\"https://github.com/TeamIO-NZ/EnterpriseNote\">\r\n        Enterprise Note\r\n        </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport User from '../models/User';\r\nimport UserService from '../services/UserServices';\r\nimport { useUser } from '../services/Context';\r\nimport { CircularProgress, Grid } from '@material-ui/core';\r\nimport Copyright from '../elements/Copyright';\r\nimport { useIsMounted } from 'react-tidy';\r\n\r\n//standard material ui stylesheet stuff\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n//main login component\r\nexport default function Login() {\r\n  const classes = useStyles();                  //Sets styles for components\r\n  const [usernameInvalid, setUsernameInvalid] = React.useState<boolean>(false);   //used for checking username validity\r\n  const [passwordInvalid, setPasswordInvalid] = React.useState<boolean>(false);   //used for checking password validity\r\n  const [waiting, setWaiting] = React.useState<boolean>(false); // used to wait for response from api, check valid creds.\r\n  const { user, setUser } = useUser();          //set user context. important for passing the user around the components      \r\n  const history = useHistory();                 //set history context for better routing\r\n  const isMounted = useIsMounted();\r\n\r\n  //if user is logged in we dont need to be here. go to the notes page\r\n  if (user.id !== -1) {\r\n    if (isMounted()) {\r\n      history.push(\"/\");\r\n    }\r\n\r\n  }\r\n  console.log(\"Before Handles\");\r\n  //check username for white space and denies validity if it has it\r\n  const handleUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    console.log(\"handleUsername\");\r\n    if ((/\\s/g.test(e.target.value))) {\r\n      setUsernameInvalid(true);\r\n    } else {\r\n      setUsernameInvalid(false);\r\n      user.name = e.target.value.toLowerCase();     //sets the user.name variable to a lowercase version of the name.\r\n    }\r\n  }\r\n  //checks the passwords not blank\r\n  const handlePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    console.log(\"HandlePassword\")\r\n    if (e.target.value === \"\") {\r\n      setPasswordInvalid(true);\r\n      console.log(\"invalid password\")\r\n    } else {\r\n      setPasswordInvalid(false);\r\n      user.password = e.target.value;\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLButtonElement>) => {\r\n\r\n    e.preventDefault();\r\n    processJsonResponse(user.name, user.password);\r\n  }\r\n  //TODO work out how to pull users shared settings based on userInfo.sharedSettingID that doesnt exist in the front end yet\r\n  //do the actual work to find out if login stuff is correct\r\n  const processJsonResponse = (username: string, password: string) => {\r\n    //call the login function then process the data and decode the token and check its valid. if it is set user to the response and push to the home page\r\n    UserService.login(username, password)\r\n      .then((response: any) => {\r\n        if (isMounted()) {\r\n          setWaiting(false);\r\n          var userInfo = response.data.data.data;\r\n          if (userInfo) {\r\n            var token = userInfo.token;\r\n            console.log(token);\r\n            var decoded = atob(userInfo.token)\r\n            if (decoded === username + password) {\r\n              setUser(new User(userInfo.name, userInfo.password, true, userInfo.token, userInfo.email, userInfo.gender, userInfo.userId, userInfo.usersettings));\r\n              history.push(\"/\");\r\n            }\r\n          } else {\r\n            setUsernameInvalid(true);\r\n            setPasswordInvalid(true);\r\n          }\r\n        }\r\n      });\r\n  }\r\n  //return the render info for the components for this page\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Login\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            autoComplete=\"username\"\r\n            error={usernameInvalid}\r\n            onChange={(e: any) => handleUsername(e)}\r\n            disabled={waiting}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            error={passwordInvalid}\r\n            autoComplete=\"current-password\"\r\n            onChange={(e: any) => handlePassword(e)}\r\n            disabled={waiting}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={(usernameInvalid && passwordInvalid) || waiting}\r\n            className={classes.submit}\r\n            onClick={(e: any) => handleSubmit(e)}\r\n          >\r\n            {\r\n              waiting ? <CircularProgress size={25} /> : \"Login\"\r\n            }\r\n\r\n          </Button>\r\n\r\n        </form>\r\n        <Grid container>\r\n          <Grid item xs></Grid>\r\n          <Grid item>\r\n            <Link to=\"/register\">\r\n              {\"Don't have an account? Register\"}\r\n            </Link>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}","export class Note {\r\n  constructor(id: number, title: string, desc: string, content: string, owner: number, viewers: number[], editors: number[]) {\r\n    this.id = id;\r\n    this.title = title;\r\n    this.desc = desc;\r\n    this.content = content;\r\n    this.owner = owner;\r\n    this.viewers = viewers;\r\n    this.editors = editors;\r\n  }\r\n  id: number;\r\n  title: string;\r\n  desc: string;\r\n  content: string;\r\n  owner: number;\r\n  viewers: number[];\r\n  editors: number[]\r\n}\r\n","import http from \"./HttpCommon\";\r\n\r\n\r\nclass NoteDataService {\r\n  getAll() {\r\n    return http.get(\"/notes\");\r\n  }\r\n  getAllUserHasAccessTo(id: number) {\r\n    return http.get(`/usersnotes/${id}`)\r\n  }\r\n  get(id: number) {\r\n    return http.get(`/note/${id}`);\r\n  }\r\n  create(data: any) {\r\n    return http.post(\"/note\", data);\r\n  }\r\n\r\n  update(id: number, data: any, uId: number) {\r\n    return http.put(`/note/${id}/${uId}`, data);\r\n  }\r\n\r\n  delete(id: number) {\r\n    console.log(\"Deleting note\");\r\n    return http.delete(`/note/${id}`);\r\n  }\r\n\r\n  //   deleteAll() {\r\n  //     return http.delete(`/tutorials`);\r\n  //   }\r\n\r\n  // getSpecific(username: string, password: string) {\r\n  //   return http.get(`/login/${username}/${password}`);\r\n  // }\r\n  async getData(userId: number) {\r\n    //console.log(\"Getting Data\");\r\n    return await this.getAllUserHasAccessTo(userId).then(response => {\r\n      return response.data;\r\n    });\r\n  };\r\n}\r\nexport default new NoteDataService();","import React, { Dispatch, SetStateAction, useEffect } from 'react';\r\nimport { createStyles, fade, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { TransitionProps } from '@material-ui/core/transitions';\r\nimport { InputBase } from '@material-ui/core';\r\nimport MUIRichTextEditor from \"mui-rte\";\r\nimport NoteDataService from '../services/NoteServices'\r\nimport { Note } from '../models/Note';\r\nimport { convertToRaw, EditorState } from 'draft-js';\r\nimport { useUser } from '../services/Context';\r\nimport { Description, Title } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    appBar: {\r\n      position: 'relative',\r\n    },\r\n    title: {\r\n      marginLeft: theme.spacing(2),\r\n      flex: 1,\r\n    },\r\n    editor: {\r\n      margin: 40\r\n    },\r\n    search: {\r\n      position: 'relative',\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: fade(theme.palette.common.white, 0.15),\r\n      '&:hover': {\r\n        backgroundColor: fade(theme.palette.common.white, 0.25),\r\n      },\r\n      margin: 3,\r\n      width: '100%',\r\n      [theme.breakpoints.up('sm')]: {\r\n        marginLeft: theme.spacing(3),\r\n        width: 'auto',\r\n      },\r\n    },\r\n    searchIcon: {\r\n      padding: theme.spacing(0, 2),\r\n      height: '100%',\r\n      position: 'absolute',\r\n      pointerEvents: 'none',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n    },\r\n    inputRoot: {\r\n      color: 'inherit',\r\n    },\r\n    inputInput: {\r\n      padding: theme.spacing(1, 1, 1, 0),\r\n      // vertical padding + font size from searchIcon\r\n      paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n      transition: theme.transitions.create('width'),\r\n      width: '100%',\r\n      [theme.breakpoints.up('md')]: {\r\n        width: '20ch',\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nconst Transition = React.forwardRef(function Transition(\r\n  props: TransitionProps & { children?: React.ReactElement },\r\n  ref: React.Ref<unknown>,\r\n) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EditDialog({ open, setOpen, note, setShouldRefresh }: { open: boolean, setOpen: Dispatch<SetStateAction<boolean>>, note: Note, setShouldRefresh: Function }) {\r\n  const classes = useStyles();\r\n  const [content, setContent] = React.useState<string>(note.content);\r\n  const [title, setTitle] = React.useState<string>(note.title);\r\n  const [desc, setDesc] = React.useState<string>(note.desc);\r\n  const [data, setData] = React.useState<string>(JSON.stringify(convertToRaw(EditorState.createEmpty().getCurrentContent())));\r\n  const { user, setUser } = useUser();          //set user context. important for passing the user around the components     \r\n\r\n  const handleClose = () => {\r\n    setShouldRefresh(String(Date.now())); // get epoch so it updates the var, refreshing the notes list\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleContentChange = (event: EditorState) => {\r\n    setContent(btoa(JSON.stringify(convertToRaw(event.getCurrentContent()))));\r\n  }\r\n\r\n  const handleTitleChange = (e: any) => {\r\n    setTitle(e.target.value)\r\n  }\r\n\r\n  const handleDescChange = (e: any) => {\r\n    setDesc(e.target.value)\r\n  }\r\n\r\n  const saveAndClose = () => {\r\n    handleSave();\r\n    handleClose();\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n    if (note.content == \"\") {\r\n      console.log(\"fuckin empty\")\r\n      note.content = btoa(JSON.stringify(convertToRaw(EditorState.createEmpty().getCurrentContent())));\r\n    } else {\r\n      console.log(\"not empty\")\r\n    }\r\n    setData(atob(note.content));\r\n    setTitle(note.title);\r\n    setDesc(note.desc);\r\n  }, [note])\r\n\r\n  const handleSave = () => {\r\n    note.title = title;\r\n    note.desc = desc;\r\n    note.content = content;\r\n\r\n    if (typeof (note.id) === 'number' && note.id > 0) {\r\n      NoteDataService.update(note.id, note, user.id).then(() => { setShouldRefresh(String(Date.now())); });\r\n    } else {\r\n      NoteDataService.create(note).then((res) => { console.log(`create: ${res}`) }).then(() => { setShouldRefresh(String(Date.now())); });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={() => handleClose()} aria-label=\"close\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              <div className={classes.search}>\r\n                <div className={classes.searchIcon}>\r\n                  <Title />\r\n                </div>\r\n                <InputBase\r\n                  placeholder=\"Title\"\r\n                  classes={{\r\n                    root: classes.inputRoot,\r\n                    input: classes.inputInput,\r\n                  }}\r\n                  inputProps={{ 'aria-label': 'title' }}\r\n                  onChange={handleTitleChange}\r\n                  defaultValue={note.title}\r\n                />\r\n              </div>\r\n              <div className={classes.search}>\r\n                <div className={classes.searchIcon}>\r\n                  <Description />\r\n                </div>\r\n                <InputBase\r\n                  placeholder=\"Description\"\r\n                  classes={{\r\n                    root: classes.inputRoot,\r\n                    input: classes.inputInput,\r\n                  }}\r\n                  inputProps={{ 'aria-label': 'description' }}\r\n                  onChange={handleDescChange}\r\n                  defaultValue={note.desc}\r\n                />\r\n              </div>\r\n\r\n            </Typography>\r\n            <Button color=\"inherit\" onClick={() => saveAndClose()}>\r\n              save\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.editor}>\r\n          <MUIRichTextEditor\r\n            inlineToolbar={true}\r\n            onChange={handleContentChange}\r\n            label=\"Type something here...\"\r\n            onSave={handleSave}\r\n            defaultValue={data}\r\n          />\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import { Avatar, createStyles, Grid, makeStyles, Theme, Tooltip, Typography } from '@material-ui/core';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport { FormatListBulletedRounded } from '@material-ui/icons';\r\nimport { AvatarGroup } from '@material-ui/lab';\r\nimport React, { useEffect } from 'react';\r\nimport { useIsMounted } from 'react-tidy';\r\nimport { JsxElement } from 'typescript';\r\nimport { Note } from '../models/Note';\r\nimport User from '../models/User';\r\nimport UserServices from '../services/UserServices';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => createStyles({\r\n  avatar: {\r\n    backgroundColor: blue[100],\r\n    color: blue[600],\r\n  },\r\n}))\r\n\r\nexport default function NoteShareGroup({ note }: { note: Note }) {\r\n  const classes = useStyles();\r\n  const [owner, setOwner] = React.useState<Array<User>>([]);\r\n  const [editors, setEditors] = React.useState<Array<User>>([]);\r\n  const [viewers, setViewers] = React.useState<Array<User>>([]);\r\n  const isMounted = useIsMounted();\r\n\r\n  const genGroup = (users: Array<User>): any => {\r\n    if (users.length > 0) {\r\n      return (\r\n\r\n        <AvatarGroup max={4} classes={{avatar: classes.avatar}}>\r\n          {\r\n            users.map((u: User) => React.cloneElement(\r\n              <Tooltip title={u.name}>\r\n                <Avatar alt={u.name} className={classes.avatar}>{u.name.charAt(0).toUpperCase().toString()}</Avatar>\r\n              </Tooltip>, {\r\n              key: u.id\r\n            }\r\n            ))\r\n          }\r\n        </AvatarGroup>\r\n      );\r\n    }\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    //new User(userInfo.name, \"\", false, \"\", \"\", \"\", userInfo.userId, -1)\r\n\r\n    UserServices.get(note.owner)\r\n      .then(data => {\r\n        console.log(data)\r\n        var n: Array<User> = [];\r\n        if (data.data === undefined || data.data === null) return [];\r\n        //console.log(data.data) \r\n        var u = data.data.data;\r\n        n.push(new User(u.name, \"\", false, \"\", \"\", \"\", u.userId, -1));\r\n\r\n        return n;\r\n      })\r\n      .then(\r\n        (users: Array<User>) => {\r\n          setOwner(users);\r\n        }\r\n      )\r\n\r\n    if (note.editors != null && note.editors.length > 0) {\r\n      let e = Object.assign([], editors);\r\n      setEditors([]);\r\n\r\n      note.editors.forEach(id => {\r\n        if (id !== 0) {\r\n          UserServices.get(id)\r\n            .then((res) => {\r\n              if (isMounted()) {\r\n                let user = res.data.data;\r\n                e.push(new User(user.name, \"\", false, \"\", \"\", \"\", user.userId, -1));\r\n                setEditors(e);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    }\r\n\r\n    if (note.viewers != null && note.viewers.length > 0) {\r\n      let v = Object.assign([], viewers);\r\n      setViewers([]);\r\n\r\n      note.viewers.forEach(id => {\r\n        if (id !== 0) {\r\n          UserServices.get(id)\r\n            .then((res) => {\r\n              if (isMounted()) {\r\n                let user = res.data.data;\r\n                v.push(new User(user.name, \"\", false, \"\", \"\", \"\", user.userId, -1));\r\n                setViewers(v);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    }\r\n\r\n  }, [note]);\r\n\r\n  return (\r\n\r\n\r\n    //grid container half\r\n    <Grid container spacing={3} alignItems=\"stretch\" justify=\"flex-start\">\r\n      <Grid item xs={3} sm={3}>\r\n        <Typography >Owner</Typography>\r\n        {\r\n          genGroup(owner)\r\n        }\r\n      </Grid>\r\n      <Grid item xs={3} sm={3}>\r\n        <Typography >Editors</Typography>\r\n        {\r\n          genGroup(editors)\r\n        }\r\n      </Grid>\r\n      <Grid item xs={3} sm={3}>\r\n        <Typography >Viewer</Typography>\r\n        {\r\n          genGroup(viewers)\r\n        }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};","import React, { useEffect } from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { blue } from '@material-ui/core/colors';\r\nimport { Note } from '../models/Note';\r\nimport { DialogContent, FormControl, FormHelperText, InputLabel, ListItemSecondaryAction, MenuItem, Radio, Select, Tooltip } from '@material-ui/core';\r\nimport NoteServices from '../services/NoteServices';\r\nimport UserServices from '../services/UserServices';\r\nimport { useIsMounted } from 'react-tidy';\r\nimport { isNullOrUndefined } from 'util';\r\nimport { People } from '@material-ui/icons';\r\nimport UserSettingService from '../services/UserSettingService';\r\n\r\nconst emails = ['username@gmail.com', 'user02@gmail.com'];\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles(\r\n    {\r\n      avatar: {\r\n        backgroundColor: blue[100],\r\n        color: blue[600],\r\n      },\r\n      actions: {\r\n        marginLeft: 40\r\n      },\r\n      listText: {\r\n        marginRight: 250\r\n      },\r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n        maxWidth: 300\r\n      },\r\n    }\r\n  )\r\n);\r\n\r\nexport interface ShareDialogProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  note: Note;\r\n  setNote: Function;\r\n  requestRefresh: Function;\r\n}\r\n\r\nexport enum Role {\r\n  None = 'None',\r\n  Viewer = 'Viewer',\r\n  Editor = 'Editor',\r\n  Owner = 'Owner',\r\n}\r\n\r\nexport default function ShareDialog(props: ShareDialogProps) {\r\n  const classes = useStyles();\r\n  const { onClose, open, note, setNote, requestRefresh } = props;\r\n  const [users, setUsers] = React.useState<Array<{ userId: number, name: string, role: Role }>>([]);\r\n  const isMounted = useIsMounted();\r\n  const [refreshCauseImLazy, setRefreshCauseImLazy] = React.useState(\"fucking work m8\");\r\n\r\n  if (note.editors == null) {\r\n    note.editors = [];\r\n  }\r\n\r\n  if (note.viewers == null) {\r\n    note.viewers = [];\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isMounted()) {\r\n      UserServices.getAll()\r\n        .then((res: any) => {\r\n          console.log(res)\r\n          if (isMounted()) {\r\n            setUsers([]);\r\n            let ul: Array<{ userId: number, name: string, role: Role }> = [];\r\n            res.data.data.forEach((u: any) => {\r\n              ul.push({\r\n                name: u.name,\r\n                userId: u.userId,\r\n                role: getRole(u.userId)\r\n              });\r\n            });\r\n            console.log(ul)\r\n            setUsers(ul);\r\n          }\r\n        });\r\n    }\r\n\r\n  }, [note, refreshCauseImLazy]);\r\n\r\n  const getRole = (uId: number): Role => {\r\n    if (note.owner == uId) {\r\n      return Role.Owner;\r\n    } else if (note.editors.includes(uId)) {\r\n      return Role.Editor;\r\n    } else if (note.viewers.includes(uId)) {\r\n      return Role.Viewer;\r\n    } else {\r\n      return Role.None;\r\n    }\r\n\r\n  }\r\n\r\n  const handleClose = () => {\r\n    console.log(note)\r\n    NoteServices.update(note.id, note, note.owner).then(() => {\r\n      requestRefresh(String(Date.now()));\r\n      onClose();\r\n    });\r\n\r\n  };\r\n\r\n  const handleRadioChange = (e: React.ChangeEvent<{ name?: string | undefined, value: unknown }>, user: { userId: number, name: string, role: Role }) => {\r\n    if (note.owner === user.userId) { return; }\r\n    let ul: Array<{ userId: number, name: string, role: Role }> = Object.assign([], users);\r\n    clearUserRoles(ul[ul.indexOf(user)]);\r\n    if (e.target.value == Role.None) {\r\n      ul[ul.indexOf(user)].role = Role.None\r\n    } else if (e.target.value == Role.Viewer) {\r\n      ul[ul.indexOf(user)].role = Role.Viewer\r\n      note.viewers.push(user.userId);\r\n    } else if (e.target.value == Role.Editor) {\r\n      ul[ul.indexOf(user)].role = Role.Editor\r\n      note.editors.push(user.userId);\r\n    }\r\n    setUsers(ul);\r\n  }\r\n\r\n\r\n  // Jank code >:) ~Joe\r\n  const clearUserRoles = (user: { userId: number, name: string, role: Role }) => {\r\n    note.viewers = note.viewers.filter(id => id !== user.userId); // filter userId out of viewers\r\n    note.editors = note.editors.filter(id => id !== user.userId); // filter userId out of editors\r\n  }\r\n\r\n  const handleSavePreset = () => {\r\n    UserSettingService.get(note.owner)\r\n      .then((res) => {\r\n        console.log(res)\r\n        return res.data.code == 400;\r\n      }).then((shouldCreate: boolean) => {\r\n        if (shouldCreate) {\r\n          UserSettingService.create({\r\n            editors: note.editors,\r\n            viewers: note.viewers,\r\n            id: note.owner\r\n          });\r\n        } else {\r\n          UserSettingService.update(note.owner, {\r\n            editors: note.editors,\r\n            viewers: note.viewers,\r\n          })\r\n        }\r\n      })\r\n  }\r\n\r\n  const handleLoadPreset = () => {\r\n    UserSettingService.get(note.owner)\r\n      .then((res) => {\r\n        console.log(res)\r\n        if (res.data.code === 200) {\r\n\r\n          if (res.data.data.editors == undefined) {\r\n            res.data.data.editors = [];\r\n          }\r\n          if (res.data.data.viewers == undefined) {\r\n            res.data.data.viewers = [];\r\n          }\r\n          let n = Object.assign({}, note);\r\n          n.editors = res.data.data.editors;\r\n          n.viewers = res.data.data.viewers;\r\n\r\n          setNote(n);\r\n\r\n          setRefreshCauseImLazy(String(Date.now()));\r\n        }\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} aria-labelledby=\"share-dialog-title\" open={open}>\r\n      <DialogTitle id=\"share-dialog-title\">\r\n        Share Note\r\n        <Button className={classes.actions} onClick={() => handleSavePreset()}>Save Preset</Button>\r\n        <Button onClick={() => handleLoadPreset()}>Load Preset</Button>\r\n      </DialogTitle>\r\n      <List>\r\n        <ListItem key=\"fuck\">\r\n          <ListItemAvatar>\r\n            <Avatar className={classes.avatar}>\r\n              <People />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText className={classes.listText} ><b>Users</b></ListItemText>\r\n          <ListItemSecondaryAction>\r\n            <Typography>\r\n              <b>Roles</b>\r\n            </Typography>\r\n          </ListItemSecondaryAction>\r\n        </ListItem>\r\n        {users.map((user: { userId: number, name: string, role: Role }) => (\r\n          <ListItem key={`${user.userId}-${user.name}`}>\r\n            <ListItemAvatar>\r\n              <Avatar className={classes.avatar}>\r\n                {user.name.charAt(0).toUpperCase()}\r\n              </Avatar>\r\n            </ListItemAvatar>\r\n            <ListItemText primary={user.name} className={classes.listText} />\r\n            <ListItemSecondaryAction>\r\n              <Tooltip title={Role.None}>\r\n                <Radio\r\n                  checked={user.role == Role.None}\r\n                  onChange={(e) => handleRadioChange(e, user)}\r\n                  value={Role.None}\r\n                  color=\"default\"\r\n                  name=\"radio-button-demo\"\r\n                  inputProps={{ 'aria-label': Role.None }}\r\n                  disabled={user.userId === note.owner}\r\n                  size=\"small\"\r\n                />\r\n              </Tooltip>\r\n              <Tooltip title={Role.Viewer}>\r\n                <Radio\r\n                  checked={user.role == Role.Viewer}\r\n                  onChange={(e) => handleRadioChange(e, user)}\r\n                  value={Role.Viewer}\r\n                  color=\"default\"\r\n                  name=\"radio-button-demo\"\r\n                  inputProps={{ 'aria-label': Role.Viewer }}\r\n                  disabled={user.userId === note.owner}\r\n                  size=\"small\"\r\n                />\r\n              </Tooltip>\r\n              <Tooltip title={Role.Editor}>\r\n                <Radio\r\n                  checked={user.role == Role.Editor}\r\n                  onChange={(e) => handleRadioChange(e, user)}\r\n                  value={Role.Editor}\r\n                  color=\"default\"\r\n                  name=\"radio-button-demo\"\r\n                  inputProps={{ 'aria-label': Role.Editor }}\r\n                  disabled={user.userId === note.owner}\r\n                  size=\"small\"\r\n                />\r\n              </Tooltip>\r\n\r\n              {/* <FormControl className={classes.formControl}>\r\n                  <InputLabel id={`role-label-${user.userId}`}>Name</InputLabel>\r\n                  <Select\r\n                    labelId={`role-label-${user.userId}`}\r\n                    id={`role-sel-${user.userId}`}\r\n                    value={Role.None}\r\n                    onChange={(e) => handleRadioChange(e, user)}\r\n                    inputProps={{ readOnly: user.userId == note.owner }}\r\n                  >\r\n                    <MenuItem value={Role.None}>None</MenuItem>\r\n                    <MenuItem value={Role.Viewer}>Viewer</MenuItem>\r\n                    <MenuItem value={Role.Editor}>Editor</MenuItem>\r\n\r\n                  </Select>\r\n                  {\r\n                    (user.userId == note.owner) && (\r\n                      <FormHelperText>You.</FormHelperText>\r\n                    )\r\n                  }\r\n                </FormControl> */}\r\n            </ListItemSecondaryAction>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </Dialog>\r\n  );\r\n}","import http from \"./HttpCommon\";\r\n\r\n\r\nclass UserSettingsDataService {\r\n\r\n  get(id: number) {\r\n    return http.get(`/usersettings/${id}`);\r\n  }\r\n  create(data: any) {\r\n    return http.post(`/usersettings`, data);\r\n  }\r\n\r\n  update(id: number, data: any) {\r\n    return http.put(`/usersettings/${id}`, data);\r\n  }\r\n\r\n  delete(id: number) {\r\n    console.log(\"Deleting note\");\r\n    return http.delete(`/usersettings/${id}`);\r\n  }\r\n\r\n}\r\nexport default new UserSettingsDataService();","import { Accordion, AccordionActions, AccordionDetails, AccordionSummary, CircularProgress, Divider, IconButton, List, ListItem, Tooltip, Typography } from \"@material-ui/core\";\r\nimport React, { useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useUser } from \"../services/Context\";\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport { Note } from \"../models/Note\";\r\nimport NoteServices from \"../services/NoteServices\";\r\nimport { ExpandMore, Delete, Edit } from \"@material-ui/icons\";\r\nimport { draftToMarkdown } from \"markdown-draft-js\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport NoteShareGroup from \"./NoteShareGroup\";\r\nimport gfm from 'remark-gfm';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport { useIsMounted } from 'react-tidy';\r\nimport userEvent from \"@testing-library/user-event\";\r\nimport User from \"../models/User\";\r\nimport ShareDialog from \"./ShareDialog\";\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      marginLeft: 40\r\n\r\n    },\r\n    title: {\r\n      margin: theme.spacing(4, 0, 2),\r\n    },\r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    item: {\r\n      width: '100%'\r\n    }\r\n  }),\r\n);\r\n\r\nfunction generate(element: React.ReactElement, notes: Array<Note>, { expanded, handleExpand, classes, handleOpenEditor, deleteNote, user, handleShare }: { expanded: string | boolean, handleExpand: any, classes: any, handleOpenEditor: any, deleteNote: any, user: User, handleShare: any }) {\r\n  return notes.map((note: Note, index: number) => React.cloneElement(\r\n    element,\r\n    {\r\n      key: index\r\n    },\r\n    <Accordion className={classes.item} expanded={expanded === `panel${index}`} onChange={handleExpand(`panel${index}`)}>\r\n      <AccordionSummary\r\n        expandIcon={<ExpandMore />}\r\n        aria-controls={`panel${index}bh-content`}\r\n        id={`panel${index}bh-header`}\r\n      >\r\n        <Typography className={classes.heading}>{note.title}</Typography>\r\n        <Typography className={classes.secondaryHeading}>{note.desc}</Typography>\r\n      </AccordionSummary>\r\n      <AccordionActions>\r\n        <NoteShareGroup note={note}></NoteShareGroup>\r\n        {\r\n          (note.owner === user.id) &&\r\n          (\r\n            <>\r\n              <Tooltip title={\"Share Note\"}><IconButton size=\"small\" onClick={() => handleShare(note)}><ShareIcon /></IconButton></Tooltip>\r\n            </>\r\n          )\r\n        }\r\n\r\n        {\r\n          ((note.owner === user.id) || (note.editors.includes(user.id))) &&\r\n          (\r\n            <>\r\n              <Tooltip title={\"Delete Note\"}><IconButton size=\"small\" onClick={() => deleteNote(note.id)}><Delete /></IconButton></Tooltip>\r\n              <Tooltip title={\"Edit Note\"}><IconButton size=\"small\" onClick={() => handleOpenEditor(index)}><Edit /></IconButton></Tooltip>\r\n            </>\r\n          )\r\n        }\r\n      </AccordionActions>\r\n      <Divider />\r\n      <AccordionDetails>\r\n        <ReactMarkdown plugins={[gfm]} children={draftToMarkdown(JSON.parse(atob(note.content)))} />\r\n      </AccordionDetails>\r\n    </Accordion>\r\n  ),\r\n  );\r\n}\r\nexport default function NotesList({\r\n  shouldRefresh,\r\n  setShouldRefresh,\r\n  notes,\r\n  setNotes,\r\n  setActiveNote,\r\n  setEditorOpen\r\n\r\n}: {\r\n  shouldRefresh: string,\r\n  setShouldRefresh: React.Dispatch<React.SetStateAction<string>>,\r\n  notes: Array<Note>,\r\n  setNotes: React.Dispatch<React.SetStateAction<Array<Note>>>,\r\n  setActiveNote: React.Dispatch<React.SetStateAction<Note>>,\r\n  setEditorOpen: React.Dispatch<React.SetStateAction<boolean>>\r\n}) {\r\n  const { user } = useUser();\r\n  const classes = useStyles();\r\n  const [dense] = React.useState(false);\r\n  const [expanded, setExpanded] = React.useState<string | false>(false);\r\n  const isMounted = useIsMounted();\r\n  const [isLoaded, setIsLoaded] = React.useState(false);\r\n  const [openShare, setOpenShare] = React.useState(false);\r\n  const [note, setNote] = React.useState<Note>(new Note(0, \"\", \"\", \"\", 0, [], []));\r\n\r\n  const handleShare = (note: Note) => {\r\n    setNote(note);\r\n    setOpenShare(true);\r\n  }\r\n\r\n  const handleExpand = (panel: string) => (event: React.ChangeEvent<{}>, isExpanded: boolean) => {\r\n    setExpanded(isExpanded ? panel : false);\r\n  };\r\n  const handleOpenEditor = (index: number) => {\r\n    setActiveNote(notes[index]);\r\n    setEditorOpen(true);\r\n  }\r\n  const deleteNote = (noteId: number) => {\r\n    console.log(\"Click\")\r\n    NoteServices.delete(noteId).then((response) => {\r\n      console.log(response);\r\n      setShouldRefresh(String(Date.now()));\r\n    });\r\n  }\r\n  useEffect(() => {\r\n    console.log('list refresh');\r\n    setIsLoaded(false);\r\n    NoteServices.getData(user.id)\r\n      .then(data => {\r\n        var n: Array<Note> = [];\r\n        if (data.data === undefined || data.data === null) return [];\r\n        data.data.forEach((element: any) => {\r\n          console.log(element.id)\r\n          n.push(new Note(element.id, element.title, element.desc, element.content, element.owner, element.viewers, element.editors));\r\n        });\r\n        return n;\r\n      })\r\n      .then(\r\n        (n: Array<Note>) => {\r\n          if (isMounted()) {\r\n            setNotes(n);\r\n            setIsLoaded(true);\r\n          }\r\n        }\r\n      )\r\n  }, [user.id, isMounted, shouldRefresh]);\r\n  if (!isLoaded) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\r\n        <CircularProgress />\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        <List dense={dense}>\r\n          {generate(\r\n            <ListItem>\r\n            </ListItem>,\r\n            notes,\r\n            {\r\n              expanded,\r\n              handleExpand,\r\n              classes,\r\n              handleOpenEditor,\r\n              deleteNote,\r\n              user,\r\n              handleShare\r\n            }\r\n          )}\r\n        </List>\r\n        <ShareDialog open={openShare} onClose={() => setOpenShare(false)} note={note} setNote={setNote} requestRefresh={setShouldRefresh} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import { TextField, MenuItem, Grid, makeStyles, createStyles, Theme, Paper, InputBase, IconButton, Divider, FormControl, Select, FormHelperText, Tooltip } from '@material-ui/core'\r\nimport { Close, Search } from '@material-ui/icons';\r\nimport React from 'react'\r\nimport { Note } from '../models/Note';\r\nimport { convertFromRaw, convertToRaw, EditorState } from 'draft-js';\r\nimport { draftToMarkdown } from 'markdown-draft-js';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: '2px 4px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      width: '100%',\r\n      marginTop: 40\r\n    },\r\n    input: {\r\n      marginLeft: theme.spacing(1),\r\n      flex: 1,\r\n    },\r\n    iconButton: {\r\n      padding: 10,\r\n    },\r\n    divider: {\r\n      height: 28,\r\n      margin: 4,\r\n    },\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    hint: {\r\n      marginLeft: 10\r\n    }\r\n  }),\r\n);\r\n\r\n\r\nconst searchTypes = [\r\n  {\r\n    value: \"Prefix\",\r\n    tooltip: \"A sentence with a given prefix or suffix\"\r\n  },\r\n  {\r\n    value: \"Suffix\"\r\n  },\r\n  {\r\n    value: \"Phone\",\r\n    tooltip: \"A phone number with a give area code and/or consecutive number pattern\"\r\n  },\r\n  {\r\n    value: \"Email\",\r\n    tooltip: \"An email address on a domain that is only partially provided\"\r\n  },\r\n  {\r\n    value: \"Three Words\",\r\n    tooltip: \"Text that contains at least three of the following case sensitive words. [meeting, minutes, agenda, action, attendees, apologies]\"\r\n  },\r\n  {\r\n    value: \"3 Letter word\",\r\n    tooltip: \"A 3+ letter word thats all caps\"\r\n  },\r\n]\r\n\r\nexport interface SearchBarProps {\r\n  setDisplayNotes: Function;\r\n  notes: Array<Note>;\r\n}\r\n\r\nexport default function SearchBar(props: SearchBarProps) {\r\n  const { setDisplayNotes, notes } = props;\r\n  const classes = useStyles();\r\n  const [searchType, setSearchType] = React.useState(\"Pefix\")\r\n  const [searchLock, setSearchLock] = React.useState(false);\r\n  const [searchCount, setSearchCount] = React.useState(0);\r\n  const [hasSearched, setHasSearched] = React.useState(false);\r\n  const [searchText, setSearchText] = React.useState(\"\");\r\n\r\n  const handleSearchChange = (event: any) => {\r\n    setSearchType(event.target.value)\r\n\r\n    if (\r\n      event.target.value === \"Prefix\"\r\n      || event.target.value === \"Suffix\"\r\n      || event.target.value === \"Phone\"\r\n    ) {\r\n      setSearchLock(false);\r\n    }\r\n    else {\r\n      setSearchLock(true);\r\n    }\r\n  }\r\n\r\n  const handleTextChange = (e: any) => {\r\n    setSearchText(e.target.value);\r\n  }\r\n\r\n  const handleSearch = (e: any) => {\r\n    e.preventDefault();\r\n    let n: Array<{ id: number, content: string }> = [];\r\n\r\n    notes.forEach((note: Note) => {\r\n      n.push({ id: note.id, content: stripStyling(note.content) })\r\n    });\r\n\r\n    let results = searchByType(n, searchType, searchText);\r\n\r\n    setSearchCount(results.length);\r\n    showResults(results);\r\n    setHasSearched(true);\r\n  }\r\n\r\n  const rThreeLetter = /([A-Z]{3,})/g;\r\n  const rThreeWorlds = /(meeting|minutes|agenda|action|attendees|apologies)/g;\r\n  const rEmail = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@([a-zA-Z0-9]){3,}(\\.)*([a-zA-Z0-9])*/g;\r\n  const rAreaCode = /^([0-9]){2}$/g;\r\n  const rNumber = /^([0-9]){1,}$/g;\r\n\r\n\r\n  const searchByType = (notes: Array<{ id: number, content: string }>, type: string, search?: string): Array<{ id: number, content: string }> => {\r\n    let output: Array<{ id: number, content: string }> = [];\r\n\r\n    notes.forEach((note: { id: number, content: string }) => {\r\n\r\n      if (type === \"Prefix\") {\r\n        note.content.split(\".\").forEach(s => {\r\n          if(search && s.startsWith(search)) {\r\n            output.push(note);\r\n          }\r\n        });\r\n      } else if (type === \"Suffix\") {\r\n        note.content.split(\".\").forEach(s => {\r\n          if(search && s.endsWith(search)) {\r\n            output.push(note);\r\n          }\r\n        });\r\n      } else if (type === \"Phone\") {\r\n        let matchedArea = false;\r\n        searchText.split(\" \").forEach(s => {\r\n          if(countMatches(s, rAreaCode) === 1 && !matchedArea) {\r\n            matchedArea = true;\r\n            output.push(note);\r\n          } else if (countMatches(s, rNumber) === 1) {\r\n            if(!output.includes(note)) {\r\n              output.push(note);\r\n            }\r\n          }\r\n        })\r\n      } else if (type === \"Email\") {\r\n        if (countMatches(note.content, rEmail) > 0) {\r\n          output.push(note);\r\n        }\r\n      } else if (type === \"Three Words\") {\r\n        if (countMatches(note.content, rThreeWorlds) >= 3) {\r\n          output.push(note);\r\n        }\r\n      } else if (type === \"3 Letter word\") {\r\n        if (countMatches(note.content, rThreeLetter) > 0) {\r\n          output.push(note);\r\n        }\r\n      }\r\n\r\n    });\r\n\r\n    return output;\r\n  }\r\n\r\n  const countMatches = (str: string, re: RegExp): number => {\r\n    return ((str || '').match(re) || []).length\r\n  }\r\n\r\n  const showResults = (n: Array<{ id: number, content: string }>) => {\r\n    let noteList: Array<Note> = [];\r\n\r\n    notes.forEach((note) => {\r\n      n.forEach((note2) => {\r\n        if (note2.id === note.id) {\r\n          noteList.push(note);\r\n        }\r\n      })\r\n    });\r\n\r\n    setDisplayNotes(noteList);\r\n  }\r\n\r\n\r\n  const handleReset = (e: any) => {\r\n    e.preventDefault();\r\n    setSearchCount(0);\r\n    setHasSearched(false);\r\n    setDisplayNotes(notes);\r\n  }\r\n\r\n  const stripStyling = (state: string): string => {\r\n    let editorState = EditorState.createWithContent(\r\n      convertFromRaw(\r\n        JSON.parse(\r\n          atob(state)\r\n        )\r\n      )\r\n    );\r\n    return editorState.getCurrentContent().getPlainText(\"\");\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Paper component=\"form\" className={classes.root}>\r\n        <InputBase\r\n          className={classes.input}\r\n          placeholder=\"Search\"\r\n          inputProps={{ 'aria-label': 'search' }}\r\n          id=\"search-field\"\r\n          onChange={handleTextChange}\r\n          disabled={searchLock} />\r\n        {hasSearched &&\r\n          (\r\n            <IconButton className={classes.iconButton} type=\"reset\" aria-label=\"reset\" onClick={(e) => handleReset(e)}>\r\n              <Close />\r\n            </IconButton>\r\n          )}\r\n        {!hasSearched &&\r\n          (\r\n            <IconButton type=\"submit\" className={classes.iconButton} aria-label=\"search\" onClick={(e) => handleSearch(e)}>\r\n              <Search />\r\n            </IconButton>\r\n          )}\r\n        <Divider className={classes.divider} orientation=\"vertical\" />\r\n        <FormControl className={classes.formControl}>\r\n          <Select\r\n            value={searchType}\r\n            onChange={handleSearchChange}\r\n            inputProps={{ 'aria-label': 'search type' }}\r\n          >\r\n            {searchTypes.map((option) => (\r\n              <MenuItem key={option.value} value={option.value}>\r\n                {option.value}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n      </Paper>\r\n      <FormHelperText className={classes.hint}>\r\n        {\r\n          hasSearched && (\r\n            `${searchCount} results match your search.`\r\n          )\r\n        }\r\n      </FormHelperText>\r\n    </>\r\n  )\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Note } from '../models/Note';\r\nimport { IconButton, MenuItem, TextField } from '@material-ui/core';\r\nimport { useUser } from '../services/Context';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Add } from '@material-ui/icons';\r\nimport EditDialog from '../elements/EditDialog';\r\nimport NotesList from '../elements/NotesList';\r\nimport SearchBar from '../elements/SearchBar';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      marginLeft: 40\r\n\r\n    },\r\n    title: {\r\n      margin: theme.spacing(4, 0, 2),\r\n    },\r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    item: {\r\n      width: '100%'\r\n    }\r\n  }),\r\n);\r\n\r\n\r\nexport default function Home() {\r\n  const { user } = useUser();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n  const [notes, setNotes] = React.useState<Array<Note>>([]);\r\n  const [displayed, setDisplayed] = React.useState<Array<Note>>([]);\r\n  const [editorOpen, setEditorOpen] = React.useState(false);\r\n\r\n  const [activeNote, setActiveNote] = React.useState(new Note(0, \"\", \"\", \"\", user.id, [0], [0]));\r\n  const [shouldRefresh, setShouldRefresh] = React.useState(\"change-me-to-refresh\");\r\n\r\n  const handleCreateNew = () => {\r\n    setActiveNote(new Note(0, \"\", \"\", \"\", user.id, [], []));\r\n    setEditorOpen(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setDisplayed(notes);\r\n  }, [notes])\r\n\r\n  if (!user.loggedIn) {\r\n    history.push(\"/login\")\r\n    return <div></div>;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Grid\r\n        container\r\n        spacing={2}\r\n        direction=\"row\"\r\n        justify=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Grid item xs={9} md={9}>\r\n          <Grid\r\n            container\r\n            spacing={2}\r\n            direction=\"row\"\r\n            justify=\"center\"\r\n            alignItems=\"center\">\r\n            <Grid item xs={3}>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Your Notes\r\n              <IconButton onClick={() => handleCreateNew()}><Add /></IconButton>\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <SearchBar \r\n                notes={notes}\r\n                setDisplayNotes={setDisplayed}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n            </Grid>\r\n\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={9} md={9}>\r\n          <NotesList\r\n            shouldRefresh={shouldRefresh}\r\n            setShouldRefresh={setShouldRefresh}\r\n            notes={displayed}\r\n            setNotes={setNotes}\r\n            setActiveNote={setActiveNote}\r\n            setEditorOpen={setEditorOpen}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <EditDialog open={editorOpen} setOpen={setEditorOpen} note={activeNote} setShouldRefresh={setShouldRefresh} />\r\n    </div>\r\n  );\r\n}\r\n//}","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport User from '../models/User';\r\nimport UserService from '../services/UserServices';\r\nimport { useUser } from '../services/Context';\r\nimport { CircularProgress, Grid } from '@material-ui/core';\r\nimport Copyright from '../elements/Copyright';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nexport default function Register() {\r\n  const classes = useStyles();\r\n\r\n  const [username, setUsername] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [email, setEmail] = React.useState(\"\");\r\n\r\n  const [usernameInvalid, setUsernameInvalid] = React.useState<boolean>(false);\r\n  const [emailInvalid, setEmailInvalid] = React.useState<boolean>(false);\r\n  const [passwordInvalid, setPasswordInvalid] = React.useState<boolean>(false);\r\n  const [passwordRepeatInvalid, setPasswordRepeatInvalid] = React.useState<boolean>(false);\r\n  const [waiting, setWaiting] = React.useState<boolean>(false);\r\n\r\n  const { user, setUser } = useUser();\r\n  const history = useHistory();\r\n  // eslint-disable-next-line no-useless-escape\r\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  let pass = \"\";\r\n\r\n\r\n  if (user.id > 0) {\r\n    history.push(\"/\"); // prevent logged in users from registering.\r\n  }\r\n\r\n  const handleUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (!(/\\s/g.test(e.target.value)) && e.target.value !== \"\") { // valid name\r\n      let name = e.target.value.toLowerCase();\r\n      UserService.getByName(name)\r\n        .then((res) => {\r\n          if (res.data.data.name === \"\") { // user not in use\r\n            setUsername(name);\r\n            setUsernameInvalid(false);\r\n          } else {\r\n            setUsernameInvalid(true);\r\n          }\r\n        });\r\n    } else {\r\n      setUsernameInvalid(true);\r\n    }\r\n  }\r\n\r\n  const handleEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if ((re.test(e.target.value))) {\r\n      let email = e.target.value.toLowerCase();\r\n      UserService.getByEmail(email)\r\n        .then((res) => {\r\n          if (res.data.data.email === \"\") {\r\n            setEmail(email);\r\n            setEmailInvalid(false);\r\n          } else {\r\n            setEmailInvalid(true);\r\n          }\r\n        });\r\n    } else {\r\n      setEmailInvalid(true);\r\n    }\r\n  }\r\n\r\n  const handlePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.value === \"\") {\r\n      setPasswordInvalid(true);\r\n      console.log(\"invalid password\")\r\n\r\n    } else {\r\n      setPasswordInvalid(false);\r\n      setPassword(e.target.value);\r\n      //  console.log(\"setting password in user to: \" + user.password)\r\n    }\r\n  }\r\n\r\n  const handleRepeatPassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.value === \"\" || (e.target.value === pass && pass !== \"\")) {\r\n      setPasswordRepeatInvalid(true);\r\n    } else {\r\n      setPasswordInvalid(false);\r\n    }\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent<HTMLButtonElement>) => {\r\n    setWaiting(true);\r\n    e.preventDefault();\r\n\r\n    user.name = username;\r\n    user.password = password;\r\n    user.email = email;\r\n    user.id = 0;\r\n\r\n    UserService.create(user)\r\n      .then((response: any) => {\r\n        console.log(response)\r\n        console.log(user)\r\n        UserService.login(username, password)\r\n          .then((response: any) => {\r\n            console.log(\"login response\")\r\n            console.log(response)\r\n            var userInfo = response.data.data.data;\r\n            var token = userInfo.token;\r\n            console.log(token);\r\n            var decoded = atob(userInfo.token)\r\n            if (decoded === username + password) {\r\n              console.log(\"Time to login\");\r\n              setUser(new User(userInfo.name, userInfo.password, true, userInfo.token, userInfo.email, userInfo.gender, userInfo.userId, -1));\r\n              console.log(user);\r\n              console.log(\"Time to push to home\")\r\n              history.push(\"/\")\r\n            }\r\n          })\r\n      })\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Register\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"username\"\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            error={usernameInvalid}\r\n            onChange={handleUsername}\r\n            disabled={waiting}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            error={emailInvalid}\r\n            onChange={handleEmail}\r\n            disabled={waiting}\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            error={passwordInvalid}\r\n            onChange={handlePassword}\r\n            disabled={waiting}\r\n          />\r\n\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"repeat-password\"\r\n            label=\"Repeat Password\"\r\n            type=\"password\"\r\n            id=\"repeat-password\"\r\n            error={passwordRepeatInvalid}\r\n            onChange={handleRepeatPassword}\r\n            disabled={waiting}\r\n          />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={usernameInvalid || passwordInvalid || waiting}\r\n            className={classes.submit}\r\n            onClick={handleSubmit}\r\n          >\r\n            {\r\n              waiting ? <CircularProgress size={25} /> : \"Register\"\r\n            }\r\n\r\n          </Button>\r\n\r\n        </form>\r\n        <Grid container>\r\n          <Grid item xs></Grid>\r\n          <Grid item>\r\n            <Link to=\"/login\">\r\n              {\"Already have an account? Login\"}\r\n            </Link>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}","import React, { useEffect } from 'react';\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { AccordionActions, AccordionDetails, Divider, IconButton, ListItem, Tooltip } from '@material-ui/core';\r\nimport { useUser } from '../services/Context';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Accordion from '@material-ui/core/Accordion/Accordion';\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary/AccordionSummary';\r\nimport { Delete, Edit, ExpandMore } from '@material-ui/icons';\r\nimport User from '../models/User';\r\nimport UserServices from '../services/UserServices';\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      marginLeft: 40\r\n\r\n    },\r\n    title: {\r\n      margin: theme.spacing(4, 0, 2),\r\n    },\r\n    heading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      flexBasis: '33.33%',\r\n      flexShrink: 0,\r\n    },\r\n    secondaryHeading: {\r\n      fontSize: theme.typography.pxToRem(15),\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    item: {\r\n      width: '100%'\r\n    }\r\n  }),\r\n);\r\n\r\nfunction generate(element: React.ReactElement, users: Array<User>, { expanded, handleExpand, classes, deleteUser }: { expanded: string | boolean, handleExpand: any, classes: any, deleteUser: any }) {\r\n  //console.log(users);\r\n  return users.map((user: User) =>\r\n    React.cloneElement(\r\n      element,\r\n      {\r\n        key: user.id\r\n      },\r\n      <Accordion className={classes.item} expanded={expanded === `panel${user.id}`} onChange={handleExpand(`panel${user.id}`)}>\r\n        <AccordionSummary\r\n          expandIcon={<ExpandMore />}\r\n          aria-controls={`panel${user.id}bh-content`}\r\n          id={`panel${user.id}bh-header`}\r\n        >\r\n          <Typography className={classes.heading}>{user.name}</Typography>\r\n          <Typography className={classes.secondaryHeading}>{user.email}</Typography>\r\n        </AccordionSummary>\r\n        <AccordionActions>\r\n          <Tooltip title={\"Delete User\"}><IconButton onClick={() => deleteUser(user.id)} size=\"small\"><Delete /></IconButton></Tooltip>\r\n          <Tooltip title={\"Edit User\"}><IconButton size=\"small\"><Edit /></IconButton></Tooltip>\r\n        </AccordionActions>\r\n        <Divider />\r\n        <AccordionDetails>\r\n          <Typography className={classes.heading}>{user.gender}</Typography>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    ),\r\n  );\r\n}\r\n\r\nexport default function Home() {\r\n  const classes = useStyles();\r\n  const [isLoaded, setIsLoaded] = React.useState(false);\r\n  const [users, setUsers] = React.useState<Array<User>>([]);\r\n  const [dense] = React.useState(false);\r\n  const { user } = useUser();\r\n  const [shouldRefresh, setShouldRefresh] = React.useState(\"change-me-to-refresh\");\r\n\r\n  const [expanded, setExpanded] = React.useState<string | false>(false);\r\n\r\n  const handleExpand = (panel: string) => (event: React.ChangeEvent<{}>, isExpanded: boolean) => {\r\n    setExpanded(isExpanded ? panel : false);\r\n  };\r\n\r\n  const deleteUser = (userId: number) => {\r\n    console.log(\"Click\")\r\n    UserServices.delete(userId).then((response) => {\r\n      console.log(response);\r\n      setShouldRefresh(String(Date.now()));\r\n\r\n    });\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    UserServices.getData()\r\n      .then(data => {\r\n        var n: Array<User> = [];\r\n        if (data.data === undefined || data.data === null) return [];\r\n        data.data.forEach((element: any) => {\r\n          n.push(new User(element.name, \"\", false, \"\", element.email, element.gender, element.userId, -1));\r\n        });\r\n        return n;\r\n      })\r\n      .then(\r\n        (users: Array<User>) => {\r\n          setUsers(users);\r\n          setIsLoaded(true);\r\n        }\r\n      )\r\n  }, [shouldRefresh]);\r\n  if (!user.loggedIn) {\r\n    return <Redirect to=\"/login\" />\r\n  }\r\n  if (!isLoaded) {\r\n    return <div>Loading...</div>\r\n  } else {\r\n    return (\r\n      <div className={classes.root}>\r\n        <Grid\r\n          container\r\n          spacing={2}\r\n          direction=\"row\"\r\n          justify=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          <Grid item xs={12} md={6}>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              List of Users\r\n            </Typography>\r\n            <List dense={dense}>\r\n              {\r\n                generate(\r\n                  <ListItem>\r\n                  </ListItem>,\r\n                  users,\r\n                  {\r\n                    expanded,\r\n                    handleExpand,\r\n                    classes,\r\n                    deleteUser\r\n                  }\r\n                )\r\n              }\r\n            </List>\r\n          </Grid>\r\n          <Grid item xs={12} md={12}>\r\n\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}","import http from './HttpCommon'\r\n\r\nclass ConnectionService {\r\n  get() {\r\n    return http.get(\"/\");\r\n  }\r\n}\r\n\r\nexport default new ConnectionService();","import { Collapse, createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport React, { useEffect } from \"react\";\r\nimport { setInterval } from \"timers\";\r\nimport ConnectionService from \"../services/ConnectionService\";\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: '100%',\r\n      '& > * + *': {\r\n        marginTop: theme.spacing(2),\r\n      },\r\n    },\r\n  }),\r\n);\r\n\r\nexport default function ConnectionWarning() {\r\n  const classes = useStyles();\r\n  const [show, setShow] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    setInterval(() => {\r\n      ConnectionService.get()\r\n        .then(() => {\r\n          if (show) {\r\n            setShow(false);\r\n          }\r\n        })\r\n        .catch(() => {\r\n          if (!show) {\r\n            setShow(true);\r\n          }\r\n        });\r\n    }, 5000); // check five seconds\r\n  });\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Collapse in={show}>\r\n        <Alert severity=\"error\">Connection to backend lost, attempting to reconnect.</Alert>\r\n      </Collapse>\r\n    </div>\r\n  )\r\n}","import { CssBaseline } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport MenuAppBar from './elements/MenuAppBar';\r\nimport Login from './pages/Login';\r\nimport User from './models/User'\r\nimport Home from './pages/Home';\r\nimport { UserContext } from './services/Context';\r\nimport Register from './pages/Register';\r\nimport UserList from './pages/UserList';\r\nimport ConnectionWarning from './elements/ConnectionWarning';\r\n\r\nfunction App() {\r\n  const [user, setUser] = React.useState<User>(new User(\"\", \"\", false, \"\", \"\", \"\", -1, -1));\r\n  console.log(\"App Level User:\");\r\n  console.log(user);\r\n  return (\r\n    <UserContext.Provider value={{ user, setUser }}>\r\n      <React.Fragment>\r\n        <CssBaseline />\r\n        <MenuAppBar />\r\n        <ConnectionWarning />\r\n        <Switch>\r\n          <Route exact path={[\"/\", \"/home\"]} component={Home} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route exact path=\"/users\" component={UserList} />\r\n        </Switch>\r\n      </React.Fragment>\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\n\r\n// import Note from './models/Note';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename=\"/web/\">\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}