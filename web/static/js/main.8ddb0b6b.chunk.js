(this["webpackJsonpnote-ui"]=this["webpackJsonpnote-ui"]||[]).push([[0],{103:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),o=n.n(r),c=n(9),i=n.n(c),s=(n(103),n(19)),l=n(176),u=n(11),d=n(166),j=n(183),h=n(168),b=n(170),g=n(43),p=n(171),m=n(78),O=n.n(m),v=n(79),f=n.n(v),x=n(173),w=n(174),k=n(83),y=Object(d.a)((function(e){return Object(j.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=y(),r=o.a.useState(null),c=Object(s.a)(r,2),i=c[0],l=c[1],u=Boolean(i),d=function(e){l(e.currentTarget)},j=function(){e.setToken("token")},m=function(){e.setToken("")},v=function(){l(null)};return Object(a.jsx)("div",{className:n.root,children:Object(a.jsx)(h.a,{position:"static",children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(p.a,{edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(O.a,{})}),Object(a.jsx)(g.a,{variant:"h6",className:n.title,children:"Enterprise Note"}),""!==e.token&&Object(a.jsxs)("div",{children:[Object(a.jsx)(p.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:d,color:"inherit",children:Object(a.jsx)(f.a,{})}),Object(a.jsxs)(k.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:v,children:[Object(a.jsx)(x.a,{onClick:v,children:"My Notes"}),Object(a.jsx)(x.a,{onClick:v&&m,children:"Logout"})]})]}),t&&""===e.token&&Object(a.jsx)(w.a,{color:"inherit",href:"/login",onClick:j,children:"Login"})]})})})}var N=n(184),L=n(180),S=n(177),T=n(182),U=n(37),E=n(181),A=n(81),B=n.n(A),D=n(175),F=n(26),I=function e(t,n,a,r,o,c,i){Object(F.a)(this,e),this.name=void 0,this.password=void 0,this.loggedIn=void 0,this.token=void 0,this.email=void 0,this.gender=void 0,this.id=void 0,this.name=t,this.password=n,this.loggedIn=a,this.token=r,this.email=o,this.gender=c,this.id=i},P=n(53),W=n(80),G=n.n(W).a.create({baseURL:"http://localhost:8082/api/v1/",headers:{"Content-type":"application/json"}}),H=new(function(){function e(){Object(F.a)(this,e)}return Object(P.a)(e,[{key:"getAll",value:function(){return G.get("/users")}},{key:"get",value:function(e){return G.get("/users/".concat(e))}},{key:"getByName",value:function(e){return G.get("/users/".concat(e))}},{key:"create",value:function(e){return G.post("/user",e)}},{key:"update",value:function(e,t){return G.put("/user/".concat(e),t)}},{key:"delete",value:function(e){return G.delete("/user/".concat(e))}},{key:"login",value:function(e,t){return G.get("/login/".concat(e,"/").concat(t))}}]),e}()),M=Object(r.createContext)({user:new I("","",!1,"","","",-1),setUser:function(e){return console.warn("No User Provider")}}),R=function(){return Object(r.useContext)(M)};function q(){return Object(a.jsxs)(g.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(U.b,{color:"inherit",to:"https://github.com/TeamIO-NZ/EnterpriseNote",children:"Enterprise Note"})," ",(new Date).getFullYear(),"."]})}var z=Object(d.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function J(){var e=z(),t=o.a.useState(!1),n=Object(s.a)(t,2),r=n[0],c=n[1],i=o.a.useState(!1),u=Object(s.a)(i,2),d=u[0],j=u[1],h=R(),b=h.user,p=h.setUser,m=function(e,t){H.login(e,t).then((function(n){var a=n.data.data;atob(n.data.data)===e+t&&H.getByName(e).then((function(e){var t=e.data.data;console.log(t),p(new I(b.name,b.password,!0,a,"","",-1))}))}))};return Object(a.jsxs)(D.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(l.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(N.a,{className:e.avatar,children:Object(a.jsx)(B.a,{})}),Object(a.jsx)(g.a,{component:"h1",variant:"h5",children:"Login"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",error:r,onChange:function(e){/\s/g.test(e.target.value)?c(!0):(c(!1),b.name=e.target.value)},autoFocus:!0}),Object(a.jsx)(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",error:d,autoComplete:"current-password",onChange:function(e){""===e.target.value?(j(!0),console.log("invalid password")):(j(!1),b.password=e.target.value,console.log("setting password in user to: "+b.password))}}),Object(a.jsx)(S.a,{control:Object(a.jsx)(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(a.jsx)(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:r&&d,className:e.submit,onClick:function(e){e.preventDefault(),m(b.name,b.password),console.log(b.name),console.log(b.password)},children:Object(a.jsx)(U.b,{to:"/home",children:"Login"})})]})]}),Object(a.jsx)(E.a,{mt:8,children:Object(a.jsx)(q,{})})]})}var V=n(172),Y=n(179),Z=function e(t,n,a,r,o,c,i){Object(F.a)(this,e),this.id=void 0,this.title=void 0,this.desc=void 0,this.content=void 0,this.owner=void 0,this.viewers=void 0,this.editors=void 0,this.id=t,this.title=n,this.desc=a,this.content=r,this.owner=o,this.viewers=c,this.editors=i},K=n(178),Q=n(131),X=n(60),$=n.n(X),_=n(82),ee=new(function(){function e(){Object(F.a)(this,e)}return Object(P.a)(e,[{key:"getAll",value:function(){return G.get("/notes")}},{key:"getAllUserHasAccessTo",value:function(e){return G.get("/usersnotes/".concat(e))}},{key:"get",value:function(e){return G.get("/note/".concat(e))}},{key:"create",value:function(e){return G.post("/note",e)}},{key:"update",value:function(e,t){return G.put("/note/".concat(e),t)}},{key:"delete",value:function(e){return G.delete("/note/".concat(e))}},{key:"getData",value:function(){var e=Object(_.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllUserHasAccessTo(t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),te=Object(d.a)((function(e){return Object(j.a)({root:{flexGrow:1,maxWidth:500,marginLeft:40},demo:{backgroundColor:e.palette.background.paper},title:{margin:e.spacing(4,0,2)}})}));function ne(e,t){return t.map((function(t,n){return o.a.cloneElement(e,{key:t.id},o.a.cloneElement(Object(a.jsx)(K.a,{}),{primary:t.title,secondary:t.desc}))}))}function ae(){var e=te(),t=o.a.useState(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],l=o.a.useState([]),u=Object(s.a)(l,2),d=u[0],j=u[1],h=o.a.useState(!1),b=Object(s.a)(h,1)[0],p=R(),m=p.user;p.setUser;return Object(r.useEffect)((function(){console.log("Home Level User:"),console.log(m),ee.getData(2).then((function(e){var t=[];return void 0===e||null===e?[]:(e.forEach((function(e){t.push(new Z(e.Id,e.Title,e.Desc,e.Content,e.Owner,e.Viewers,e.Editors))})),t)})).then((function(e){j(e),i(!0)}))}),[]),c?Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(Y.a,{container:!0,spacing:2,children:Object(a.jsxs)(Y.a,{item:!0,xs:12,md:6,children:[Object(a.jsx)(g.a,{variant:"h6",className:e.title,children:"Your Notes"}),Object(a.jsx)("div",{className:e.demo,children:Object(a.jsx)(V.a,{dense:b,children:ne(Object(a.jsx)(Q.a,{}),d)})})]})})}):Object(a.jsx)("div",{children:"Loading..."})}var re=function(){var e=o.a.useState(""),t=Object(s.a)(e,2),n=t[0],r=(t[1],o.a.useState(new I("","",!1,"","","",-1))),c=Object(s.a)(r,2),i=c[0],d=c[1];return console.log("App Level User:"),console.log(i),Object(a.jsx)(M.Provider,{value:{user:i,setUser:d},children:Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(C,{token:n}),Object(a.jsxs)(u.c,{children:[Object(a.jsx)(u.a,{exact:!0,path:["/","/home"],component:ae,children:Object(a.jsx)(ae,{})}),Object(a.jsx)(u.a,{exact:!0,path:"/login",component:J,children:Object(a.jsx)(J,{})})]})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,186)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(U.a,{children:Object(a.jsx)(re,{})})}),document.getElementById("root")),oe()}},[[128,1,2]]]);
//# sourceMappingURL=main.8ddb0b6b.chunk.js.map